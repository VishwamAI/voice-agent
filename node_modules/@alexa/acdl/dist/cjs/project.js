"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Project = exports.validateLoadedModules = exports.loadProject = exports.loadProjectSync = void 0;
const path_1 = __importDefault(require("path"));
const ask = __importStar(require("./ast"));
const package_1 = require("./package");
const checker_1 = require("./checker");
const constants_1 = require("./constants");
const visit_1 = require("./visit");
/**
 * Synchronously load a Project from the file system.
 *
 * @param config project configuration
 */
function loadProjectSync(config) {
    const external = (0, package_1.scanPackagesSync)(path_1.default.join(config.rootDir, "node_modules"));
    if (config.name !== constants_1.Constants.AlexaSchemaPackageName && config.name !== constants_1.Constants.ACCorePackageName) {
        // if we're compiling a package that doesn't have `@alexa/schema` or `@alexa/ac-core`, load them from the bundled libs.
        const packages = new Set(external.map((e) => { var _a; return (_a = e.config) === null || _a === void 0 ? void 0 : _a.name; }).filter((n) => n !== undefined));
        if (!packages.has(constants_1.Constants.AlexaSchemaPackageName)) {
            external.push((0, package_1.loadBundledPackageSync)("schema"));
        }
        if (!packages.has(constants_1.Constants.ACCorePackageName)) {
            external.push((0, package_1.loadBundledPackageSync)("ac-core"));
        }
    }
    const source = (0, package_1.loadPackageSync)(config.rootDir, undefined, true);
    if (source === undefined) {
        throw new Error(`Failed to load project from '${config.rootDir}'.'`);
    }
    return new Project({
        config,
        source,
        external: validateLoadedModules(external),
    });
}
exports.loadProjectSync = loadProjectSync;
/**
 * Asynchronously load a Project from the file system.
 *
 * @param config project configuration
 */
async function loadProject(config) {
    const external = await (0, package_1.scanPackages)(path_1.default.join(config.rootDir, "node_modules"));
    if (config.name !== constants_1.Constants.AlexaSchemaPackageName && config.name !== constants_1.Constants.ACCorePackageName) {
        // if we're compiling a package that doesn't have `@alexa/schema` or `@alexa/ac-core`, load them from the bundled libs.
        const packages = new Set(external.map((e) => { var _a; return (_a = e.config) === null || _a === void 0 ? void 0 : _a.name; }).filter((n) => n !== undefined));
        if (!packages.has(constants_1.Constants.AlexaSchemaPackageName)) {
            external.push(await (0, package_1.loadBundledPackage)("schema"));
        }
        if (!packages.has(constants_1.Constants.ACCorePackageName)) {
            external.push(await (0, package_1.loadBundledPackage)("ac-core"));
        }
    }
    const source = await (0, package_1.loadPackage)(config.rootDir, undefined, true);
    if (source === undefined) {
        throw new Error(`Failed to load project from '${config.rootDir}'.'`);
    }
    return new Project({
        config,
        source,
        external: validateLoadedModules(external),
    });
}
exports.loadProject = loadProject;
/**
 * validate loaded modules
 * 1. for same module with same version, ignore the second one to avoid duplicates
 * 2. for same module with different version, report error
 * @param modules
 * @returns
 */
function validateLoadedModules(modules) {
    const result = [];
    const moduleMap = new Map(); // name - version
    modules.forEach((module) => {
        var _a;
        if (((_a = module.config) === null || _a === void 0 ? void 0 : _a.name) && module.config.version) {
            if (!moduleMap.has(module.config.name)) {
                result.push(module);
                moduleMap.set(module.config.name, module.config.version);
            }
            else if (moduleMap.get(module.config.name) !== module.config.version) {
                throw new Error(`Failed to load project, found same module '${module.config.name}' with different versions '${moduleMap.get(module.config.name)}', '${module.config.version}'.`);
            }
        }
    });
    return result;
}
exports.validateLoadedModules = validateLoadedModules;
function indexModules(modules) {
    return modules.map((f) => ({ [f.uri]: f })).reduce((a, b) => ({ ...a, ...b }), {});
}
/**
 * Parsed ACDL Project.
 */
class Project {
    constructor(props) {
        var _a, _b;
        /**
         * Project Configuration.
         */
        Object.defineProperty(this, "config", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "responseTemplates", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "slotTypes", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "source", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "external", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "externalIndex", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "sourceIndex", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        /**
         * List of Skill entrypoints indicated by an {@link ask.NameDeclaration} pointing to a {@link Apply} data structure
         * for the call to `com.amazon.alexa.ask.conversations.skill`.
         */
        Object.defineProperty(this, "skills", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        /**
         * The Global TypeChecker environment for this Project.
         */
        Object.defineProperty(this, "checker", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        /**
         * Globally cached {@link PolicyInfo} for the configured Skill.
         */
        Object.defineProperty(this, "policyInfo", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        /**
         * Globally cached root {@link ask.DialogDeclaration} instances. By root, we mean
         * the dialogs that consititute the entry-point of the skill.
         */
        Object.defineProperty(this, "rootDialogs", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.config = props.config;
        this.source = props.source;
        this.external = props.external;
        this.sourceIndex = indexModules(props.source.modules);
        this.externalIndex = indexModules(this.external.flatMap((p) => p.modules));
        this.responseTemplates = (_a = this.source.responseTemplates) !== null && _a !== void 0 ? _a : [];
        const combinedSlotTypes = {};
        const allSlotTypes = [...((_b = props.source.slotTypes) !== null && _b !== void 0 ? _b : []), ...props.external.flatMap((pkg) => { var _a; return (_a = pkg.slotTypes) !== null && _a !== void 0 ? _a : []; })];
        allSlotTypes.forEach((slotType) => {
            if (slotType.name.name) {
                const existingSlotType = combinedSlotTypes[slotType.name.name];
                if (existingSlotType !== undefined) {
                    slotType = new ask.SlotType(slotType.name, [...slotType.locales, ...existingSlotType.locales]);
                }
                combinedSlotTypes[slotType.name.name] = slotType;
            }
        });
        this.slotTypes = Object.values(combinedSlotTypes).map((slotType) => new ask.SlotType(slotType.name, Array.from(new Set(slotType.locales))));
    }
    get modules() {
        return [...this.externalModules, ...this.sourceModules];
    }
    get externalModules() {
        return Object.values(this.externalIndex);
    }
    get sourceModules() {
        return Object.values(this.sourceIndex);
    }
    getModule(uri) {
        return this.sourceIndex[uri] || this.externalIndex[uri];
    }
    clearCaches() {
        this.checker = undefined;
        this.policyInfo = undefined;
        this.rootDialogs = undefined;
        this.skills = undefined;
    }
    remove(uri) {
        delete this.sourceIndex[uri];
        delete this.externalIndex[uri];
        this.clearCaches();
    }
    isSource(uri) {
        for (const src of this.config.srcDir) {
            if (uri.startsWith(path_1.default.resolve(this.config.rootDir, src))) {
                return true;
            }
        }
        return false;
    }
    update(module) {
        if (this.isSource(module.uri)) {
            this.sourceIndex[module.uri] = module;
        }
        else {
            this.externalIndex[module.uri] = module;
        }
        this.clearCaches();
    }
    getTypeChecker() {
        if (this.checker === undefined) {
            this.checker = new checker_1.TypeChecker(this);
        }
        return this.checker;
    }
    /**
     * Check whether a project is a library
     * A library should not have the main property inside ask config
     */
    isLibrary() {
        return this.config.skill === undefined && this.config.projectVersion !== package_1.ProjectVersion.Beta1;
    }
    /**
     * check whether a project is a skill
     * A skill must provide the main property inside ask config
     */
    isSkill() {
        return this.config.skill !== undefined || this.config.projectVersion === package_1.ProjectVersion.Beta1;
    }
    /**
     * Find all skill actions used in project
     * @return An array of declaration and apply of all skill actions
     */
    findSkills() {
        const checker = this.getTypeChecker();
        if (this.skills === undefined) {
            this.skills = this.modules
                .flatMap((mod) => {
                var _a, _b, _c;
                return (_c = (_b = (_a = mod.content) === null || _a === void 0 ? void 0 : _a.expressions) === null || _b === void 0 ? void 0 : _b.map((expr) => {
                    var _a, _b;
                    return expr.kind === "NameDeclaration" && ((_a = expr.expression) === null || _a === void 0 ? void 0 : _a.kind) === "Call" && ((_b = checker.getApply(expr.expression)) === null || _b === void 0 ? void 0 : _b.isSkillAction())
                        ? {
                            declaration: expr,
                            apply: checker.getApply(expr.expression),
                        }
                        : undefined;
                })) !== null && _c !== void 0 ? _c : [];
            })
                .filter((c) => c !== undefined);
        }
        return this.skills;
    }
    isRootDialog(dialog) {
        var _a;
        return ((_a = this.getRootDialogs()) === null || _a === void 0 ? void 0 : _a.find((d) => d === dialog)) !== undefined;
    }
    /**
     * Get all dialogs in the Skill.
     */
    getAllDialogs() {
        return this.modules.flatMap((module) => { var _a, _b; return ((_b = (_a = module.content) === null || _a === void 0 ? void 0 : _a.expressions) !== null && _b !== void 0 ? _b : []).flatMap((expr) => (expr.kind === "DialogDeclaration" ? [expr] : [])); });
    }
    /**
     * Get the dialogs that are the skill's entry-point.
     *
     * This is computed in various different ways.
     * 1. when skill action exist and dialogs array provided, will read dialogs in the dialog array
     * 2. if skill action not exist or dialog array not exist, will traverse all the dialogs and filter out root dialogs by
     *   Condition 1. The dialog must use Nothing return type and has no arguments
     *   Condition 2. The dialog must not been called in other dialogs
     */
    getRootDialogs() {
        var _a;
        if (this.rootDialogs === undefined) {
            const project = this;
            const checker = this.getTypeChecker();
            const skills = this.findSkills();
            if (skills.length === 1) {
                // when only one skill action provided
                const dialogs = skills[0].apply.getArgumentValueThing("dialogs");
                if (dialogs !== undefined && (dialogs === null || dialogs === void 0 ? void 0 : dialogs.isList()) && dialogs.isLiteral()) {
                    // when skill action exist and the dialogs array is not undefined
                    // The compiler prioritize all the dialogs in the dialogs array
                    const dialogItems = dialogs.getItems();
                    const allDialogs = new Set(dialogItems === null || dialogItems === void 0 ? void 0 : dialogItems.map((dialogItem) => {
                        if (dialogItem === null || dialogItem === void 0 ? void 0 : dialogItem.isDialog()) {
                            return dialogItem.origin;
                        }
                        return undefined;
                    }));
                    this.rootDialogs = Array.from(allDialogs).filter((dialog) => dialog !== undefined);
                    return this.rootDialogs.length > 0 ? this.rootDialogs : undefined;
                }
            }
            const allDialogs = this.getAllDialogs();
            // find all dialogs that have nothing return type and have no arguments
            const rootDialogCandidates = allDialogs.filter((dialog) => {
                const returnType = checker.getType(dialog.returnType);
                return (dialog.arguments === undefined || dialog.arguments.length === 0) && ((returnType === null || returnType === void 0 ? void 0 : returnType.isVoid()) || (returnType === null || returnType === void 0 ? void 0 : returnType.isNothing()));
            });
            // find all dialogs that has been called or passed as an argument in other dialogs
            const calledDialogs = new Set();
            allDialogs === null || allDialogs === void 0 ? void 0 : allDialogs.forEach((dialog) => {
                var _a;
                return (_a = dialog.samples) === null || _a === void 0 ? void 0 : _a.forEach((sample) => {
                    var _a, _b;
                    return (_b = (_a = sample.scope) === null || _a === void 0 ? void 0 : _a.expressions) === null || _b === void 0 ? void 0 : _b.forEach(function findCalledDialogs(node) {
                        if (node.kind === "Call") {
                            const apply = project.getTypeChecker().getApply(node);
                            if (apply === null || apply === void 0 ? void 0 : apply.isDialog()) {
                                calledDialogs.add(apply.decl.kind === "DialogDeclaration" ? apply.decl : apply.decl.declaration);
                                const argumentsThings = apply.getArgumentValueThingList();
                                argumentsThings.forEach((argumentThing) => {
                                    if (argumentThing === null || argumentThing === void 0 ? void 0 : argumentThing.isDialog()) {
                                        calledDialogs.add(argumentThing.origin);
                                    }
                                });
                            }
                        }
                        (0, visit_1.visitEachChild)(node, findCalledDialogs);
                    });
                });
            });
            this.rootDialogs = Array.from(rootDialogCandidates.filter((dialog) => !calledDialogs.has(dialog)));
        }
        return (_a = this.rootDialogs) !== null && _a !== void 0 ? _a : undefined;
    }
    /**
     * read policy definition in skill action
     * convert policy info into More readable structure
     * E.G.
     * ```
     * namespace test
     * policies = [ResetArguments{arguments = [getWeather.arguments.cityName, getWeather.arguments.date]}, ResetAllArguments {action = getWeather2}]
     *
     * getPolicyInfo => Map {
     *    test.getWeather: {
     *        type: "ResetArguments",
     *        actionFqn: "test.getWeather",
     *        arguments: ["cityName", "date"]
     *    },
     *    test.getWeather2: {
     *        type: "ResetAllArguments",
     *        actionFqn: "test.getWeather2",
     *        arguments: []
     *    }
     * }
     * ```
     */
    getPolicyInfo() {
        if (this.policyInfo !== undefined) {
            return this.policyInfo;
        }
        const skills = this.findSkills();
        if (skills.length !== 1) {
            return undefined;
        }
        this.policyInfo = new Map();
        const policies = skills[0].apply.getArgumentValueThing("policies");
        const policyItems = (policies === null || policies === void 0 ? void 0 : policies.isList()) && policies.isLiteral() ? policies.getItems() : [];
        policyItems === null || policyItems === void 0 ? void 0 : policyItems.forEach((item) => {
            var _a, _b, _c;
            if ((_a = item === null || item === void 0 ? void 0 : item.apply) === null || _a === void 0 ? void 0 : _a.isResetArguments()) {
                const argumentsValueThing = item.getProperty("arguments");
                if ((argumentsValueThing === null || argumentsValueThing === void 0 ? void 0 : argumentsValueThing.isLiteral()) && argumentsValueThing.isList()) {
                    const items = argumentsValueThing.getItems();
                    items === null || items === void 0 ? void 0 : items.forEach((item) => {
                        var _a, _b, _c, _d, _e;
                        if ((_b = (_a = item === null || item === void 0 ? void 0 : item.parent) === null || _a === void 0 ? void 0 : _a.parent) === null || _b === void 0 ? void 0 : _b.isAction()) {
                            const { actionName } = item.parent.parent;
                            if (actionName && ((_c = item.origin) === null || _c === void 0 ? void 0 : _c.kind) === "Name" && item.origin.name) {
                                if (!this.policyInfo.has(actionName)) {
                                    this.policyInfo.set(actionName, {
                                        type: "ResetArguments",
                                        actionFqn: actionName,
                                        arguments: [item.origin.name],
                                    });
                                }
                                else if (this.policyInfo.has(actionName)) {
                                    (_e = (_d = this.policyInfo.get(actionName)) === null || _d === void 0 ? void 0 : _d.arguments) === null || _e === void 0 ? void 0 : _e.push(item.origin.name);
                                }
                            }
                        }
                    });
                }
            }
            else if ((_b = item === null || item === void 0 ? void 0 : item.apply) === null || _b === void 0 ? void 0 : _b.isResetAllArguments()) {
                const actionThing = item.getProperty("action");
                if (actionThing === null || actionThing === void 0 ? void 0 : actionThing.isAction()) {
                    const actionName = (_c = actionThing.name) === null || _c === void 0 ? void 0 : _c.name;
                    if (actionName) {
                        this.policyInfo.set(actionName, {
                            type: "ResetAllArguments",
                            actionFqn: actionName,
                            arguments: [],
                        });
                    }
                }
            }
        });
        return this.policyInfo;
    }
}
exports.Project = Project;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvamVjdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wcm9qZWN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsZ0RBQXdCO0FBQ3hCLDJDQUE2QjtBQUc3Qix1Q0FTbUI7QUFFbkIsdUNBQWtEO0FBQ2xELDJDQUFzQztBQUN0QyxtQ0FBdUM7QUFHdkM7Ozs7R0FJRztBQUNILFNBQWdCLGVBQWUsQ0FBQyxNQUFxQjtJQUNuRCxNQUFNLFFBQVEsR0FBRyxJQUFBLDBCQUFnQixFQUFDLGNBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxjQUFjLENBQUMsQ0FBQyxDQUFDO0lBQzdFLElBQUksTUFBTSxDQUFDLElBQUksS0FBSyxxQkFBUyxDQUFDLHNCQUFzQixJQUFJLE1BQU0sQ0FBQyxJQUFJLEtBQUsscUJBQVMsQ0FBQyxpQkFBaUIsRUFBRTtRQUNuRyx1SEFBdUg7UUFDdkgsTUFBTSxRQUFRLEdBQUcsSUFBSSxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLFdBQUMsT0FBQSxNQUFBLENBQUMsQ0FBQyxNQUFNLDBDQUFFLElBQUssQ0FBQSxFQUFBLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO1FBQzlGLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLHFCQUFTLENBQUMsc0JBQXNCLENBQUMsRUFBRTtZQUNuRCxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUEsZ0NBQXNCLEVBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztTQUNqRDtRQUNELElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLHFCQUFTLENBQUMsaUJBQWlCLENBQUMsRUFBRTtZQUM5QyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUEsZ0NBQXNCLEVB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