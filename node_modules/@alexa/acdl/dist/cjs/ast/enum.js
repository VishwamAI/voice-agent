"use strict";
var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {
    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {
    if (kind === "m") throw new TypeError("Private method is not writable");
    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
    return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;
};
var _EnumDeclaration_itemsIndex;
Object.defineProperty(exports, "__esModule", { value: true });
exports.EnumItem = exports.EnumDeclaration = void 0;
const tree_1 = require("./tree");
/**
 * Represents an enum type declaration.
 * ```acdl
 * enum Locale {
 *   en_US
 *   de_DE
 * }
 * ```
 */
class EnumDeclaration extends tree_1.Tree {
    constructor(
    /**
     * Name of the Enum Type, e.g. `org.example.Locale`.
     */
    name, 
    /**
     * List of items in this Enum Type.
     */
    items, 
    /**
     * Annotations attached to this Enum Declaration.
     */
    annotations, loc) {
        super("EnumDeclaration", loc);
        Object.defineProperty(this, "name", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: name
        });
        Object.defineProperty(this, "items", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: items
        });
        Object.defineProperty(this, "annotations", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: annotations
        });
        _EnumDeclaration_itemsIndex.set(this, void 0);
        this.setAsParentOn(name);
        this.setAsParentOn(items);
        this.setAsParentOn(annotations);
    }
    /**
     * Map of Name to EnumItem.
     *
     * Values are lazily computed to preserve memory.
     */
    get itemsIndex() {
        var _a;
        if (__classPrivateFieldGet(this, _EnumDeclaration_itemsIndex, "f") === undefined) {
            __classPrivateFieldSet(this, _EnumDeclaration_itemsIndex, this.items
                ? Object.entries(this.items)
                    .map(([name, item]) => ({
                    [name]: item.clone(),
                }))
                    .reduce((a, b) => ({ ...a, ...b }), {})
                : null, "f");
        }
        return (_a = __classPrivateFieldGet(this, _EnumDeclaration_itemsIndex, "f")) !== null && _a !== void 0 ? _a : undefined;
    }
    clone() {
        var _a, _b, _c;
        return new EnumDeclaration((_a = this.name) === null || _a === void 0 ? void 0 : _a.clone(), (_b = this.items) === null || _b === void 0 ? void 0 : _b.map((item) => item.clone()), (_c = this.annotations) === null || _c === void 0 ? void 0 : _c.map((item) => item.clone()), this.loc);
    }
}
exports.EnumDeclaration = EnumDeclaration;
_EnumDeclaration_itemsIndex = new WeakMap();
/**
 * Tree ndoe to represent an EnumItem.
 */
class EnumItem extends tree_1.Tree {
    constructor(
    /**
     * Name of the Enum Item, e.g. `en_US` in:
     * ```acdl
     * enum Locale {
     *   en_US
     * }
     * ```
     */
    name, 
    /**
     * Annotations attached to this Enum Item Declaration.
     */
    annotations, loc) {
        super("EnumItemDeclaration", loc);
        Object.defineProperty(this, "name", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: name
        });
        Object.defineProperty(this, "annotations", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: annotations
        });
        this.setAsParentOn(name);
        this.setAsParentOn(annotations);
    }
    clone() {
        var _a;
        return new EnumItem(this.name, (_a = this.annotations) === null || _a === void 0 ? void 0 : _a.map((a) => a.clone()), this.loc);
    }
}
exports.EnumItem = EnumItem;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW51bS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hc3QvZW51bS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFFQSxpQ0FBNEI7QUFHNUI7Ozs7Ozs7O0dBUUc7QUFDSCxNQUFhLGVBQWdCLFNBQVEsV0FBdUI7SUFDMUQ7SUFDRTs7T0FFRztJQUNNLElBQXNCO0lBQy9COztPQUVHO0lBQ00sS0FBNkI7SUFDdEM7O09BRUc7SUFDTSxXQUFxQyxFQUM5QyxHQUFnQztRQUVoQyxLQUFLLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxDQUFDLENBQUM7Ozs7O21CQVhyQjs7Ozs7O21CQUlBOzs7Ozs7bUJBSUE7O1FBU1gsOENBQTBDO1FBTHhDLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMxQixJQUFJLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ2xDLENBQUM7SUFJRDs7OztPQUlHO0lBQ0gsSUFBVyxVQUFVOztRQUNuQixJQUFJLHVCQUFBLElBQUksbUNBQVksS0FBSyxTQUFTLEVBQUU7WUFDbEMsdUJBQUEsSUFBSSwrQkFBZSxJQUFJLENBQUMsS0FBSztnQkFDM0IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztxQkFDdkIsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7b0JBQ3RCLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRTtpQkFDckIsQ0FBQyxDQUFDO3FCQUNGLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBQyxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUN6QyxDQUFDLENBQUMsSUFBSSxNQUFBLENBQUM7U0FDVjtRQUNELE9BQU8sTUFBQSx1QkFBQSxJQUFJLG1DQUFZLG1DQUFJLFNBQVMsQ0FBQztJQUN2QyxDQUFDO0lBRU0sS0FBSzs7UUFDVixPQUFPLElBQUksZUFBZSxDQUN4QixNQUFBLElBQUksQ0FBQyxJQUFJLDBDQUFFLEtBQUssRUFBRSxFQUNsQixNQUFBLElBQUksQ0FBQyxLQUFLLDBDQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQ3ZDLE1BQUEsSUFBSSxDQUFDLFdBQVcsMENBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsRUFDN0MsSUFBSSxDQUFDLEdBQUcsQ0FDRCxDQUFDO0lBQ1osQ0FBQztDQUNGO0FBbERELDBDQWtEQzs7QUFTRDs7R0FFRztBQUNILE1BQWEsUUFBUyxTQUFRLFdBQTRDO0lBQ3hFO0lBQ0U7Ozs7Ozs7T0FPRztJQUNNLElBQXNCO0lBQy9COztPQUVHO0lBQ00sV0FBcUMsRUFDOUMsR0FBZ0M7UUFFaEMsS0FBSyxDQUFDLHFCQUFxQixFQUFFLEdBQUcsQ0FBQyxDQUFDOzs7OzttQkFQekI7Ozs7OzttQkFJQTs7UUFJVCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDbEMsQ0FBQztJQUVNLEtBQUs7O1FBQ1YsT0FBTyxJQUFJLFFBQVEsQ0FDakIsSUFBSSxDQUFDLElBQUksRUFDVCxNQUFBLElBQUksQ0FBQyxXQUFXLDBDQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQ3ZDLElBQUksQ0FBQyxHQUFHLENBQ0QsQ0FBQztJQUNaLENBQUM7Q0FDRjtBQTdCRCw0QkE2QkMifQ==