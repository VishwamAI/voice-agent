import { OutputTemplateConverter } from '@jovotech/output';
import { Plugin } from '../Plugin';
export class OutputPlugin extends Plugin {
    getDefaultConfig() {
        return {};
    }
    mount(parent) {
        parent.middlewareCollection.use('response.output', (jovo) => {
            return this.handle(jovo);
        });
    }
    async handle(jovo) {
        const converter = new OutputTemplateConverter(jovo.$platform.outputTemplateConverterStrategy);
        // TODO: catch possible errors
        const response = await converter.toResponse(jovo.$output);
        jovo.$response = await jovo.$platform.finalizeResponse(response, jovo);
    }
}
//# sourceMappingURL=OutputPlugin.js.map