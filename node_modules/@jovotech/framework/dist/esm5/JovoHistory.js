import { JovoInput } from './index';
import { plainToClass } from 'class-transformer';
var JovoHistory = /** @class */ (function () {
    function JovoHistory(platform, items) {
        if (items === void 0) { items = []; }
        this.items = items;
        this.platform = platform;
    }
    Object.defineProperty(JovoHistory.prototype, "prev", {
        get: function () {
            return this.items.length > 0 ? this.items[0] : undefined;
        },
        enumerable: false,
        configurable: true
    });
    JovoHistory.prototype.getPersistableData = function () {
        return {
            items: this.items,
        };
    };
    JovoHistory.prototype.setPersistableData = function (data) {
        this.items = (data === null || data === void 0 ? void 0 : data.items) || [];
        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
            var item = _a[_i];
            if (item.request) {
                item.request = plainToClass(this.platform.requestClass, item.request);
            }
            if (item.response) {
                item.response = plainToClass(this.platform.outputTemplateConverterStrategy.responseClass, item.response);
            }
            if (item.input) {
                item.input = plainToClass(JovoInput, item.input);
            }
        }
        return this;
    };
    return JovoHistory;
}());
export { JovoHistory };
//# sourceMappingURL=JovoHistory.js.map